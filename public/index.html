<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>OpenCV.js Loader Test</title>
  <style>
    body { font-family: system-ui, Arial, sans-serif; max-width: 680px; margin: 40px auto; }
    #msg { font-size: 1.7rem; margin-top: 2.5rem; }
  </style>
  <!-- NO async/defer/module! -->
  <script src="https://docs.opencv.org/4.x/opencv.js"></script>
</head>
<body>
  <h2>OpenCV.js Loader Test</h2>
  <div id="msg">⏳ loading OpenCV...</div>
  <script>
    // Always set this BEFORE OpenCV loads, but in practice we check after load as well
    window.Module = {
      onRuntimeInitialized() {
        document.getElementById('msg').textContent =
          '✅ OpenCV.js loaded: ' + (cv && cv.getBuildInformation ? 'Yes' : 'No');
      }
    };
    // Fallback for rare case (hot reload or double load)
    setTimeout(() => {
      if (window.cv && cv.getBuildInformation) {
        document.getElementById('msg').textContent =
          '✅ OpenCV.js loaded: Yes';
      }
    }, 5000);
  </script>
</body>
</html>
